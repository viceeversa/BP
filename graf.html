import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

# DÃ¡ta
data = {
    'NÃ¡zov politickÃ©ho subjektu': [
        'ProgresÃ­vne Slovensko', 
        'OÄ½ANO A PRIATELIA', 
        'Sloboda a Solidarita', 
        'SlovenskÃ¡ nÃ¡rodnÃ¡ strana', 
        'SMER - sociÃ¡lna demokracia', 
        'HLAS - sociÃ¡lna demokracia', 
        'KresÅ¥anskodemokratickÃ© hnutie'
    ],
    'PoÄet platnÃ½ch hlasov': [533136, 264137, 187645, 166995, 681017, 436415, 202515],
    'PoÄet mandÃ¡tov podÄ¾a RVÄŒ': [32, 16, 11, 10, 41, 26, 12],
    'PoÄet kandidÃ¡tov': [150, 150, 150, 150, 150, 150, 150]  # VÅ¾dy 150
}

# Vytvorenie DataFrame
df = pd.DataFrame(data)

# Usporiadanie podÄ¾a poÄtu hlasov (od najvÃ¤ÄÅ¡ieho po najmenÅ¡ie)
df = df.sort_values(by='PoÄet platnÃ½ch hlasov', ascending=False)

# PouÅ¾itie palety Viridis
#Purple, Plasma', 'Blues', 'Sunsetdark', 'Darkmint'
colors = px.colors.sequential.Viridis

# Vytvorenie farebnÃ©ho kÄ¾ÃºÄa na zÃ¡klade politickÃ½ch subjektov
color_map = {subjekt: colors[i % len(colors)] for i, subjekt in enumerate(df['NÃ¡zov politickÃ©ho subjektu'])}

# ğŸ“Š InteraktÃ­vny stÄºpcovÃ½ graf - PoÄet mandÃ¡tov
fig_bar = px.bar(df, 
                 x='NÃ¡zov politickÃ©ho subjektu', 
                 y='PoÄet mandÃ¡tov podÄ¾a RVÄŒ',
                 hover_data={'PoÄet platnÃ½ch hlasov': True},
                 labels={'PoÄet mandÃ¡tov podÄ¾a RVÄŒ': 'PoÄet mandÃ¡tov'},
                 title='PoÄet mandÃ¡tov pre politickÃ© subjekty',
                 color='NÃ¡zov politickÃ©ho subjektu',
                 color_discrete_map=color_map)

fig_bar.update_traces(marker=dict(line=dict(width=1, color='black')), opacity=0.9)
fig_bar.update_layout(yaxis_title="PoÄet mandÃ¡tov")

# ğŸ¥§ KolÃ¡ÄovÃ½ graf (percentuÃ¡lne rozdelenie hlasov)
fig_pie = px.pie(df, 
                 names='NÃ¡zov politickÃ©ho subjektu', 
                 values='PoÄet platnÃ½ch hlasov', 
                 title='PercentuÃ¡lne rozdelenie hlasov medzi subjekty',
                 color='NÃ¡zov politickÃ©ho subjektu',
                 color_discrete_map=color_map,
                 hole=0.4)

fig_pie.update_traces(
    textinfo='percent+label',
    hoverinfo='label+percent+value',
    pull=[0.1 if x == df['NÃ¡zov politickÃ©ho subjektu'].iloc[0] else 0 for x in df['NÃ¡zov politickÃ©ho subjektu']]
)

# ğŸ¯ Scatter plot - Porovnanie hlasov a mandÃ¡tov
fig_scatter = px.scatter(df,
                         x='PoÄet platnÃ½ch hlasov',
                         y='PoÄet mandÃ¡tov podÄ¾a RVÄŒ',
                         size='PoÄet kandidÃ¡tov',
                         color='NÃ¡zov politickÃ©ho subjektu',
                         title='Porovnanie poÄtu hlasov a zÃ­skanÃ½ch mandÃ¡tov',
                         color_discrete_map=color_map,
                         hover_name='NÃ¡zov politickÃ©ho subjektu')

fig_scatter.update_layout(xaxis_title="PoÄet platnÃ½ch hlasov", yaxis_title="PoÄet mandÃ¡tov")

# Zobrazenie grafov
fig_bar.show()
fig_pie.show()
fig_scatter.show()

# UloÅ¾enie grafov ako HTML
fig_bar.write_html("graf_bar.html")
fig_pie.write_html("graf_pie.html")
fig_scatter.write_html("graf_scatter.html")
